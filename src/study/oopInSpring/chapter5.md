# 05.객체 지향 설계 5원칙 - SOLID

- 응집도는 높이고 결합도는 낮추라는 고전 원칙을 객체 지향의 관점에서 재정립.

  - 결합도 : 모듈(클래스) 간의 상호 의존 정도로서 결합도가 낮으면 모듈 간의 상호 의존성이 줄어들어 객체의 재사용이나 수정, 유지보수가 용이하다.
  - 응집도 : 하나의 모듈 내부에 존재하는 구성 요소들의 기능적 관련성 응집도가 높은 모듈은 하나의 책임에 집중하고 독립성이 높아져 재사용이나 기능의 수정, 유지보수가 용이하다.

- OOD(Object Oriented Design) 의 5원칙 : SOLID

  - SRP(Single Responsibility Principle) : 단일 책임 원칙
  - OCP(Open Closed Principal) : 개방 폐쇄 원칙
  - LSP(Liskov Substitution Principle) : 리스코프 치환 원칙
  - ISP(Interface Segregation Principle) : 인터페이스 분리 원칙
  - DIP(Dependency Inversion Principle) : 의존 역전 원칙

- SOLID는 객체 지향 4대특성을 발판으로 하고 디자인 패턴의 뼈대이며 스프링 프레임워크의 근간.

### SRP - 단일 책임 원칙

- 어떤 클래스를 변경해야 하는 이유는 오직 하나뿐이어야 한다.
- 객체지향의 4대 특성중 모델링을 담당하는 추상화와 관련이 깊다.
- 애플리케이션의 경계를 정하고 추상화를 통해 클래스들을 선별하고 속성와 메서드를 설게할때 반드시 단일 책임 원칙을 고려하자.

- 메서드가 단일 책임 원칙을 지키지 않은 경우

```java
class 강아지 {
    final static Boolean 수컷 = true;
    final static Boolean 암컷 = false;
    Boolean 성별;

    void 소변보다() {
        if(this.성별 == 수컷) {
            // 한쪽 다리를 들고 소변을 본다.
        } else {
            // 뒷다리 두개를 굽혀 앉은 자세로 소변을 본다.
        }
    }
}
```

- 단일 책임 원칙을 적용해 개선한 코드

```java
abstract class 강아지{
    abstract void 소변보다()
}

class 수컷강아지 extends 강아지 {
    void 소변보다() {
        // 한쪽 다리를 들고 소변을 본다.
    }
}

class 암컷강아지 extends 강아지 {
    void 소변보다() {
        // 뒷다리 두 개로 앉은 자세로 소변을 본다.
    }
}
```

### OCP - 개방 폐쇄 원칙

- 소프트웨어 엔티티(클래스, 모듈, 함수 등)는 확장에 대해서는 열려있어야 하지만 변경에 대해서는 닫혀 있어야 한다.
  = 자신의 확장에는 열려있고, 주변의 변화에 대해서는 닫혀 있어야 한다.
- jdbc 인터페이스라고 하는 완충장치를 사용하는 클라이언트는 데이터베이스가 오라클에서 MySQL로 바뀌더라도 connection을 설정하는 부분 외에는 따로 수정할 필요가 없다.
  ![OCP의 예 : JDBC](~@image/oopInSpring/chap05/007.jpg)

### LSP - 리스코프 치환 원칙

- 하위 클래스의 인스턴스는 상위형 객체 참조 변수에 대입해 상위 클래스의 인스턴스 역할을 하는데 문제가 없어야 한다.
- 서브타입은 언제나 자신의 기반타입(base type)으로 교체할 수 있어야 한다.
- 객체지향에서의 상속대로 구현된 프로그램이라면 이미 리스코프 치환 원칙을 잘 지키고 있다고 할 수 있다.
  - 하위클래스 is a kind of 상위클래스 - 하위 분류는 상위 분류의 한 종류다
  - 구현클래스 is able to 인터페이스 - 구현 분류는 인터페이스할 수 있어야 한다.
- `아버지 춘향이 = new 딸()` : 딸에게 아빠의 역할을 맡기고 있다. 이상함
- `동물 뽀로로 = new 펭귄()` : 펭귄 한마리가 태어나 뽀로로라 이름을 짓고 동물의 행위(메서드)를 하게 함. 리스코프 치환 원칙 만족.
- 하위형에서 선행 조건은 강화될 수 없다
- 하위형에서 후행 조건은 약화될 수 없다
- 하위형에서 상위형의 불변 조건은 반드시 유지돼야 한다

### ISP - 인터페이스 분리 원칙

- 클라이언트는 자신이 사용되지 않는 메서드에 의존 관계를 맺으면 안된다
- 다양한 책임을 가진 남자 클래스  
  ![다양한 책임을 가진 남자 클래스](~@image/oopInSpring/chap05/012.jpg)
- 단일 책임 원칙을 적용해 남자 클래스를 단일 책임 원칙을 가진 여러 클래스로 분리  
  ![단일 책임 원칙을 적용해 남자 클래스를 단일 책임 원칙을 가진 여러 클래스로 분리](~@image/oopInSpring/chap05/013.jpg)
- 인터페이스 분할 원칙을 적용한 남자 클래스  
  ![인터페이스 분할 원칙을 적용한 남자 클래스](~@image/oopInSpring/chap05/014.jpg)
